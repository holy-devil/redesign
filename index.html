<!doctype html>
<html id="visdown" lang="en">
<head>
    <meta charset="utf-8">
    <title>Visdown - Markdown for Visualisation</title>
    <meta name="description" content="Create Simple Visualisation Charts with Markdown">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="lib/vega.min.js"></script>
    <script src="lib/vega-lite.min.js"></script>
    <script src="lib/vega-embed.min.js"></script>
    <script src="lib/marked.min.js"></script>
    <script src="lib/yaml.min.js"></script>
    
    <style>
      #visdown-output {
        max-width: 1500px;
        margin: 0 auto;
      }
    
      #visdown-input {
        display: none;
      }

      body {
        padding-left: 20px;
        background: #f8ebdb;
        font-family: Helvetica;
      }

      body>p, body>title,  {
        padding: 20px;
      }
    </style>  

</head>
<body>

<div id="visdown-input"> 
# Life Expectancy Visualization

The following is data from The World Bank to look at life expectancy over time and by country. The data goes back to 1960 and up to the most current estimates for 2009.

The major dips for some of the countries jumped out at me immediately. A few quick searches suggest that they coincide with war, such as the Bangladesh Liberation War in the 1970s,  
the Iran-Iraq War in the 1980s, and the Rwanda Civil War in the 1990s. There’s also a smaller dip for Iraq starting in early 2000.

Some countries, such as Seychelles, didn’t have data that went back to 1960. In this case, the line starts where annual data became available.


## Life Expectancy by Region

```vis
width: 1200
height: 700
data:
  url: data/lifeExpectPivot.csv
selection:
    mouHov:
      type: single
      'on': mouseover
    SRegion:
      type: single
      fields:
      - Region
      bind:
        input: select
        options:
        - East Asia and Pacific
        - Europe and Central Asia
        - Latin America and Caribbean
        - Middle East and North Africa
        - South Asia
        - Sub-Saharan Africa
        - Nill
      'on': click
      resolve: global
          
mark: 
    type: line
    opacity: 0.5
    interpolate: basis
encoding:
    x:
      type: ordinal
      field: Year
    y:
      type: quantitative
      field: Expectancy
    tooltip:
      field: Country
      type: nominal
    detail:
      field: Country
      type: nominal
    color:
      value: 'rgba(153, 152, 152, 0.3)'
      condition:
        selection: SRegion
        field: Region
        type: nominal
        scale: 
          range:
          - red
          - blue
          - purple
          - green
          - darkblue
          - darkgreen
          - brown
    size:
      value: 1
      condition:
        selection: mouHov
        value: 3
        legend: null
```



## Life expectancy By Income
 
```vis
$schema: https://vega.github.io/schema/vega-lite/v2.json
width: 1200
height: 700
data:
  url: data/lifeExpectPivot.csv
selection:
    mouHov:
      type: single
      'on': mouseover

    Sincome:
      type: single
      fields:
      - Income
      bind:
        input: select
        options:
        - High income
        - Upper middle income
        - Lower middle income
        - Low income
        - NA
      'on': click
      resolve: global

mark: 
    type: line
    opacity: 0.5
    interpolate: basis
encoding:
    x:
      type: ordinal
      field: Year
    y:
      type: quantitative
      field: Expectancy
    tooltip:
      field: Country
      type: nominal
    detail:
      field: Country
      type: nominal
    color:
      value: 'rgba(153, 152, 152, 0.3)'
      condition:
        selection: Sincome
        field: Income
        type: nominal
        scale: 
          range:
          - red
          - blue
          - purple
          - green
          - darkblue
    size:
      value: 1
      condition:
        selection: mouHov
        value: 4
        legend: null
      
```

</div>
<div id="visdown-output"></div>
  
<script src="visdown.js"></script>

</body>
</html>
